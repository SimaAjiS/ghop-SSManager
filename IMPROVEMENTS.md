# 改善点と将来の展望

本プロジェクトの現状の課題と、将来的に実装が望まれる機能についてまとめました。

## 技術的課題・設計上の考慮 (Technical Considerations)

### 1. データ正規化とバリデーション
- `backend/schema.py` と Pydantic モデルでカラム型・主キー・FK を厳密に定義しています。
- `scripts/import_data.py` では Excel 取り込み時に型変換・NaN 正規化・FK チェックを実施し、警告としてログに残します。

### 2. 大量データ・パフォーマンス
- すべての一覧 API はサーバーサイドページネーション（`page`/`limit`）とデバウンスされた検索入力に対応し、React 側では 500ms デバウンスで不要な API 呼び出しを抑制しています。

### 3. Excel テンプレート出力
- `openpyxl` でテンプレートに直接書き込み、Chip Appearance 画像挿入や COND 文字列の共通フォーマットを採用しています。
- 行挿入や書式崩れを避けるためセルアドレスを定数化して管理しています。

### 4. 監査性と追跡性
- インポート完了時の行数やエラー件数を `AuditLog` テーブルに記録し、UI から常時参照できます。

## 現在の課題 (Known Issues)

### 1. 認証・認可機能の未実装 (Issue 4)
現在、アプリケーションにはログイン機能がなく、URLを知っていれば誰でも管理者画面（Master View）にアクセス可能です。
- **リスク**: データの閲覧・操作が制限されていないため、セキュリティ上好ましくありません。
- **対策**: ユーザー認証（ログイン）とロールベースのアクセス制御（管理者/一般ユーザー）の実装が必要です。

### 2. データの編集機能
現在は Excel インポートによる一括更新のみで、画面上での個別データの編集・追加・削除はできません。
- **要望**: 軽微な修正を画面上で行いたいというニーズが予想されます。

### 3. エラーハンドリングの強化
Excel インポート時に不整合データがある場合、現在は警告ログを出してインポートを続行する仕様ですが、より詳細なレポート機能が望まれます。

## 将来の改善計画 (Future Roadmap)

### 短期目標
- [ ] **認証機能の実装**: ログイン画面とセッション管理の導入。
- [ ] **権限管理**: 管理者のみがインポートや監査ログ閲覧を行えるように制限。
- [ ] **API ベースURLの環境変数化**: 運用環境向けのハードニング（Issue 26）。

### 中期目標
- [ ] **データ編集機能**: `DataTable` 上での直接編集機能の実装。
- [ ] **監査ログの拡充**:
  - データのエクスポート履歴や、将来的な編集履歴の記録。
  - ログのフィルタリング機能（アクション種別やユーザーでの絞り込み）。
  - ログ保持期間の設定（古いログの自動削除）。

### 長期目標
- [ ] **本番環境へのデプロイ構成**: Docker化やクラウド環境（AWS/Azure）へのデプロイガイドの整備。
- [ ] **API のバージョン管理**: 外部システム連携を見据えた API 設計の見直し。

## 技術的負債の解消
- **テストカバレッジの向上**: 現在は主要機能の動作確認が中心ですが、自動テスト（単体テスト・E2Eテスト）を拡充し、品質を担保する必要があります。
